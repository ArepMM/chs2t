//------------------------------------------------------------------------------
//
//      Магистральный пассажирский электровоз постоянного тока ЧС2т.
//      Дополнение для Russian Railway Simulator (RRS)
//
//      (c) RRS development team:
//          Дмитрий Притыкин (maisvendoo),
//          Николай Авилкин (avilkin.nick)
//
//      Дата: 21/08/2019
//
//------------------------------------------------------------------------------

#include "pusk-rez.h"

//------------------------------------------------------------------------------
// Конструктор
//------------------------------------------------------------------------------
PuskRez::PuskRez(QObject* parent) : Device(parent)
  , poz (0)
  , R(0)
{

}

//------------------------------------------------------------------------------
// Деструктор
//------------------------------------------------------------------------------
PuskRez::~PuskRez()
{

}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void PuskRez::ode_system(const state_vector_t& Y, state_vector_t& dYdt, double t)
{

}

//------------------------------------------------------------------------------
// Загрузка данных из конфигурационного файла
//------------------------------------------------------------------------------
void PuskRez::load_config(CfgReader& cfg)
{
    for (int i = 0; i < 43; i++)
    {
        cfg.getDouble("Steps", "s" + QString::number(i), R);
        steps.insert(i, R);
    }
}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void PuskRez::preStep(state_vector_t& Y, double t)
{

}

//------------------------------------------------------------------------------
//
//------------------------------------------------------------------------------
void PuskRez::stepKeysControl(double t, double dt)
{

    R = steps[poz];

}
